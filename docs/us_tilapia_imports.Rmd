---
title: "us_tilapia_imports"
output: html_document
---

Wild Data

```{r}
library(tidyverse)
library(here)
library(janitor)
library(ggplot2)
```

Read in the data as us_tilapia_imports. 
```{r}
us_tilapia_imports <- read_csv(here::here("data","us_tilapia_imports.csv"))

View(us_tilapia_imports)
```

```{r}
summary(us_tilapia_imports)
names(us_tilapia_imports)
dim(us_tilapia_imports)
skimr::skim(us_tilapia_imports)
class(us_tilapia_imports$country)
class(us_tilapia_imports$`1992`)
```

Use pivot_longer() to reshape the data into long format (currently, the variable
“year” is spread across multiple columns).
```{r}
us_tilapia_imports_long <- us_tilapia_imports |> 
  pivot_longer(cols = '1992':'2018', 
               names_to = "year", 
               values_to = "annual_imports") |> 
  mutate(year = as.numeric(year)) 

View(us_tilapia_imports_long)
class(us_tilapia_imports_long$year)
```

find the total US tilapia imports by year
```{r}
yearly_tilapia_tot <- us_tilapia_imports_long %>% dplyr::group_by(year) %>% 
  summarize(total_imports = sum(annual_imports, na.rm = TRUE))

View(yearly_tilapia_tot)
```

Create a ggplot line graph of total US tilapia imports for all years
```{r}
ggplot(data = yearly_tilapia_tot, aes(x = year, 
                                      y = total_imports)) +
  geom_line() +
  labs(title = "Total Imports in the United States by Year",
       x = "time (years)",
       y = "total volume (lbs)")

ggsave(here::here("figs", "yearly_tilapia_tot.png"), height = 5, width = 6)
```

Create a subset that only retains imports from Ecuador, Honduras, Costa Rica, and Mexico. 
```{r}
lat_tilapia_imports <- us_tilapia_imports_long |> 
  filter(country %in% c("Ecuador", "Honduras", "Costa Rica", "Mexico"))

View(lat_tilapia_imports)
```

Create a ggplot graph of total US tilapia imports over time, for those four countries in the subset you created above, separated by country. Update axis labels, add a title, customize your color scheme, update the theme.
```{r}
ggplot(data = lat_tilapia_imports, 
       aes(x = year, y = annual_imports)) +
  geom_line(aes(color = country)) + labs(title = "US Tilapia Imports Over Time by Country",
       x = "time (years)",
       y = "total volume (lbs)") + 
  theme_minimal()

ggsave(here::here("figs", "lat_tilapia_imports.png"), height = 5, width = 6)
```

